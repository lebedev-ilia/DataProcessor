# Privacy / Raw retention (полуфинал)

## 1) Общий принцип

По умолчанию:
- храним только derived features/эмбеддинги/агрегаты
- raw текст/комменты/ocr — не храним

## 2) Raw OCR / raw comments как опции

Опции:
- `retain_raw_ocr_text` (по умолчанию false)
- `retain_raw_comments` (по умолчанию false, отдельная опция)

## 3) Верификация владельца канала

Полуфинальное правило:
- raw storage разрешён только после **OAuth-верификации владельца канала** (YouTube).
- raw разрешён только для `channel_id`, который подтверждён у пользователя.

## 4) Retention TTL / hard cap

Рекомендация (полуфинал):
- даже если пользователь выбирает retention, система применяет `hard_cap_days`.

Полуфинально принято для MVP:
- `hard_cap_days = 60`
Причины:
- стоимость хранения
- юридические риски

## 5) Разделение рисков

- OCR текст и комментарии — разные уровни риска и должны быть отдельными опциями/политиками.

## 6) Право на удаление (delete request)

Полуфинал (MVP):
- По запросу пользователя/правообладателя система должна уметь удалить данные по `video_id`:
  - NPZ артефакты и `manifest.json` в `result_store`
  - кэш LLM-рендера
  - записи индекса в БД (если используется)

## 7) Логи и PII (Round 2)

Полуфинальное правило:
- По умолчанию в логи **не пишем** raw текст/комментарии/транскрипт/части OCR.
- В логи допустимы только: длины (символов/токенов), счётчики, хэши, статусы, метрики агрегатов.
- Raw тексты допускаются в логи только в локальном dev-режиме при явном флаге (например, `--log-pii`).


